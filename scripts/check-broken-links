#!/bin/bash
# Broken Links Detection Script
# Usage: ./scripts/check-broken-links [directory]

TARGET_DIR="${1:-/workspace/components}"

echo "üîç Checking for broken symbolic links in: $TARGET_DIR"
echo "=================================================="

BROKEN_LINKS=$(find "$TARGET_DIR" -type l ! -exec test -e {} \; -print)

if [ -z "$BROKEN_LINKS" ]; then
    echo "‚úÖ No broken symbolic links found!"
    exit 0
else
    echo "‚ùå Broken symbolic links found:"
    echo "$BROKEN_LINKS"
    echo ""
    echo "üìä Summary:"
    echo "   Count: $(echo "$BROKEN_LINKS" | wc -l)"
    echo ""
    echo "üßπ To clean up, run:"
    echo "   find \"$TARGET_DIR\" -type l ! -exec test -e {} \\; -delete"
    exit 1
fi