#!/usr/bin/env node

/**
 * ONCE CLI - Web4 TypeScript Direct Execution
 * No shell scripts, no spawn calls - pure TypeScript execution
 */

import { fileURLToPath } from 'url';
import { dirname, join } from 'path';

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);

const args = process.argv.slice(2);

// Direct TypeScript execution - main function
async function main() {
    if (args[0] === 'demo') {
        // Import and execute InteractiveDemoController directly
        const { main: demoMain } = await import('../examples/multi-env-demo/interactive-demo-web4.mjs');
        // Pass remaining arguments
        await demoMain(args.slice(1));
        } else {
        // Import and execute ONCECLI directly
        const { OnceCLI } = await import('../dist/ts/layer5/ONCECLI.js');
        const cli = new OnceCLI();
        await cli.handleCommand(args);
    }
}

// Execute with error handling
main().catch(error => {
    console.error('❌ ONCE CLI Error:', error.message);
    process.exit(1);
});