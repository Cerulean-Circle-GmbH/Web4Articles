**📎 Previous Commit:** Web4Requirement name/title enhancement with getter/setter functionality  
**🔗 Previous PDCA:** [Web4Requirement Name/Title Enhancement](2025-08-22-UTC-0350-web4requirement-name-title-enhancement.md)

---

# 📄 WEB4REQUIREMENT SCENARIO-TO-MD VIEW IMPLEMENTATION
**Date:** 2025-08-22  
**Time:** 03:56 UTC  
**Objective:** Implement bidirectional scenario loading and MD view generation for Web4Requirement component  
**Role:** Developer  
**Issue:** Need capability to read requirements from scenarios and generate MD views with [uuid].requirement.md naming  

---

## Summary

### 🔗 Artifact Links
- **Updated Interface:** [components/Web4Requirement/v1.0/src/ts/layer3/Requirement.ts](../../../../../../../components/Web4Requirement/v1.0/src/ts/layer3/Requirement.ts)
- **Updated Implementation:** [components/Web4Requirement/v1.0/src/ts/layer2/DefaultRequirement.ts](../../../../../../../components/Web4Requirement/v1.0/src/ts/layer2/DefaultRequirement.ts)
- **Updated CLI:** [components/Web4Requirement/v1.0/src/ts/layer5/RequirementCLI.ts](../../../../../../../components/Web4Requirement/v1.0/src/ts/layer5/RequirementCLI.ts)
- **Generated MD View:** [394d5b56-51f0-4ff8-8213-88853f387dfc.requirement.md](../../../../../../../components/Unit/latest/spec/requirements/394d5b56-51f0-4ff8-8213-88853f387dfc.requirement.md)

### ⚡ TL;DR
Implemented complete bidirectional scenario conversion: JSON → Requirement Object → MD View. CLI supports `requirement md <scenario.json>` command generating `[uuid].requirement.md` files with structured markdown content.

---

## 📋 PLAN

### 🎯 Objective
Implement scenario-to-requirement loading and MD view generation to enable bidirectional data transformation and human-readable requirement documentation.

### 🧩 Requirements Analysis
- **Scenario Loading:** Read and parse IOR-based scenario JSON files
- **Object Hydration:** Initialize Requirement object from scenario data
- **MD View Generation:** Create structured markdown representation
- **File Naming:** Use `[uuid].requirement.md` pattern for consistency
- **CLI Integration:** Add `md` command for end-to-end workflow

### ✅ Architecture Patterns
- **Web4 Bidirectional Scenarios:** JSON ↔ Object state preservation
- **MDView Pattern:** Object → Human-readable markdown transformation
- **IOR Structure Support:** Parse existing scenario JSON format
- **CLI Command Extension:** Maintain existing interface patterns

---

## 🛠️ DO

### 🔧 Implementation Details

#### Layer 3 Interface Extensions
```typescript
export interface Requirement {
  // ... existing methods
  
  /**
   * Load requirement from scenario file
   */
  loadFromScenario(scenarioPath: string): Promise<RequirementResult>;
  
  /**
   * Generate MD view for requirement
   */
  generateMDView(): string;
  
  /**
   * Save MD view to file
   */
  saveMDView(outputPath?: string): Promise<RequirementResult>;
}
```

#### Layer 2 Implementation Methods

##### 1. Scenario Loading (`loadFromScenario`)
```typescript
async loadFromScenario(scenarioPath: string): Promise<RequirementResult> {
  const scenarioContent = await fs.readFile(scenarioPath, 'utf-8');
  const scenarioData = JSON.parse(scenarioContent);
  
  // Load from IOR-based scenario structure
  if (scenarioData.IOR && scenarioData.model) {
    this.uuid = scenarioData.IOR.uuid;
    this._name = scenarioData.model.name || scenarioData.model.title || '';
    this.description = scenarioData.model.description || '';
    // ... scenario reconstruction
  }
}
```

##### 2. MD View Generation (`generateMDView`)
```typescript
generateMDView(): string {
  return `# ${this._name}

## Requirement Details

- **UUID:** \`${this.uuid}\`
- **Name:** ${this._name}
- **Title:** ${this._name}
- **Status:** ${this.status}

## Description

${this.description}

---

*Generated by Web4Requirement Component v1.0*
`;
}
```

##### 3. MD View Persistence (`saveMDView`)
```typescript
async saveMDView(outputPath?: string): Promise<RequirementResult> {
  const filename = `${this.uuid}.requirement.md`;
  const filePath = outputPath ? path.join(outputPath, filename) : filename;
  const mdContent = this.generateMDView();
  
  await fs.writeFile(filePath, mdContent, 'utf-8');
}
```

#### Layer 5 CLI Integration
```typescript
// New 'md' command handler
private async handleMDView(args: string[]): Promise<void> {
  const scenarioPath = args[0];
  const outputPath = args[1];
  
  const loadResult = await this.requirement.loadFromScenario(scenarioPath);
  const saveResult = await this.requirement.saveMDView(outputPath);
}
```

---

## ✅ CHECK

### 🧪 End-to-End Testing Results

**Test Command:**
```bash
$PROJECT_ROOT/components/Web4Requirement/v1.0/requirement.sh md 394d5b56-51f0-4ff8-8213-88853f387dfc.scenario.json
```

**CLI Output:**
```
✅ Requirement loaded from scenario: 394d5b56-51f0-4ff8-8213-88853f387dfc.scenario.json
📋 UUID: 394d5b56-51f0-4ff8-8213-88853f387dfc
📄 Name: Name Attribute Test
📝 Description: Testing the Web4Requirement CLI with the new name attribute and title getter/setter implementation.
📄 MD view generated: 394d5b56-51f0-4ff8-8213-88853f387dfc.requirement.md
💾 MD view saved: 394d5b56-51f0-4ff8-8213-88853f387dfc.requirement.md
```

### 📊 File Generation Verification
- **Input:** `394d5b56-51f0-4ff8-8213-88853f387dfc.scenario.json` (577 bytes)
- **Output:** `394d5b56-51f0-4ff8-8213-88853f387dfc.requirement.md` (448 bytes)
- **Naming Pattern:** ✅ `[uuid].requirement.md` format correctly applied

### 🔄 Workflow Validation
1. **Scenario Parsing:** ✅ IOR structure parsed correctly
2. **Object Hydration:** ✅ Requirement object state populated from JSON
3. **MD Generation:** ✅ Structured markdown content created
4. **File Persistence:** ✅ MD file saved with correct naming

---

## 🚀 ACT

### ✅ Immediate Actions Completed
1. ✅ Added `loadFromScenario()` method with IOR-based JSON parsing
2. ✅ Implemented `generateMDView()` with structured markdown template
3. ✅ Created `saveMDView()` with `[uuid].requirement.md` naming convention
4. ✅ Extended CLI with `md` command and comprehensive help text
5. ✅ Tested complete workflow: JSON → Object → MD file generation

### 🎯 Web4 Architectural Compliance
- **Bidirectional Scenarios:** ✅ JSON to object state preservation
- **MDView Pattern:** ✅ Object to human-readable transformation
- **IOR Structure Support:** ✅ Existing scenario format compatibility
- **Layer Separation:** ✅ Interface (L3), Implementation (L2), CLI (L5)
- **Empty Constructor Pattern:** ✅ Maintained throughout enhancement

### 📋 CLI Command Reference
```bash
# Create new requirement
requirement create "title" "description"

# Generate MD view from scenario
requirement md <scenario-file.json> [output-directory]

# Examples
requirement md 394d5b56-51f0-4ff8-8213-88853f387dfc.scenario.json
requirement md scenario.json ./output/
```

### 🔄 Future Enhancement Opportunities
1. **Template Customization:** Custom MD templates via configuration
2. **Batch Processing:** Generate MD views for multiple scenarios
3. **Metadata Enrichment:** Include creation/update timestamps, owner info
4. **Cross-References:** Link to related requirements via UUIDs

---

**🏆 Outcome:** Web4Requirement component now supports complete bidirectional scenario transformation with MD view generation, enabling seamless transition between machine-readable JSON and human-readable markdown documentation.
