[Back to ScrumMaster PDCA](../)

# PDCA - Correct Version Structure with Git Branches/Tags

## Plan
- **Objective:** 
  - Understand the correct version structure using git branches/tags
  - Fix task specifications to reflect proper component/version/src/language hierarchy
  - Document the proper use of git submodules for versioning
- **Scope:** 
  - Component folder structure correction
  - Git submodule versioning strategy
  - Sprint 7 task updates
- **Targets (metrics):** 
  - Correct structure: `components/ComponentName/version/src/language`
  - All Sprint 7 tasks updated with proper paths
  - Clear documentation of version management via git
- **Inputs (files/dirs):** 
  - QA feedback about folder structure
  - [Sprint 6 submodule strategy](../../../sprints/sprint-6/task-6-architect-componentization-and-submodules.md)
  - [Sprint 7 task 2.1](../../../sprints/sprint-7/task-2.1-architect-srcv2-structure.md)
- **Acceptance Criteria:**
  - Version is understood as git branch/tag, not folder name
  - Structure follows: components/TSRanger/v2.5/src/ts/
  - Git submodule checkout determines active version
- **Assumptions:**
  - Version folders represent checked-out git branches/tags
  - Each component is a git submodule
  - Version switching happens via git operations
- **Constraints:**
  - Must align with Sprint 6 submodule architecture
  - Version names must be valid git refs
  - Structure must support CI/CD workflows
- **Options Considered (with pros/cons):**
  - Option 1: Version as folder name (src.v2.5)
    - Pros: Explicit in filesystem
    - Cons: Not how git submodules work
  - Option 2: Version as git branch/tag (selected)
    - Pros: Native git versioning, proper submodule usage
    - Cons: Version not visible in path without git
  - Option 3: Hybrid with symlinks
    - Pros: Best of both worlds
    - Cons: Complex, platform-specific
- **Rationale for Selected Option:**
  - Aligns with Sprint 6 submodule architecture
  - Uses git's native versioning capabilities
  - Supports CI matrix builds across versions
- **Risks and Mitigations:**
  - Risk: Confusion about active version
    - Mitigation: Clear git status in prompts, documentation
  - Risk: Accidental version switches
    - Mitigation: Git hooks, CI validation

## Do
- Actions executed:
  - Analyzed correct structure: `components/ComponentName/version/src/language`
  - Identified that "version" refers to git branch/tag, not folder name
  - Understood Sprint 6 context: each component is a git submodule
  - Realized my error: was treating version as a folder rather than git state
- Commands run (examples):
```bash
# Correct submodule checkout for version
cd components/TSRanger
git checkout v2.5  # or tag v2.5.0
cd ../..

# Structure after checkout
tree components/TSRanger/
# components/TSRanger/
#   src/
#     ts/
#       io/
#       layer2/
#       layer4/
#       layer5/
```

## Check
- Verifications performed:
  - Sprint 6 defines git submodules for components
  - Version branches mentioned: main, n14.4, njs14
  - Folder structure should be: components/TSRanger/src/ts/ (with version via git)
- QA Feedback (quote literally):
> "the folder structure is still not correct it should be components/CompnentName/version/src/language where version is a branch or better tag from a git submodule for ComponentName"
- Evidence (snippets/commands):
```bash
# From Sprint 6:
git submodule add git@github.com:<ORG>/TSRanger.git components/TSRanger
cd components/TSRanger
git checkout v2.5  # This is the "version" in the path

# Resulting structure:
components/
  TSRanger/           # Git submodule
    src/              # Source directory (at v2.5)
      ts/             # Language directory
        io/
        layer2/
        layer4/
        layer5/
```

## Act
- Improvements for next cycle:
  - Update all task documentation to show correct structure
  - Add git submodule commands to task descriptions
  - Document version management strategy clearly
- Automation to add:
  - Script to checkout specific version across all components
  - Version status reporter for all submodules
  - CI matrix for version combinations
- Follow-ups:
  - Fix [task 2.1](../../../sprints/sprint-7/task-2.1-architect-srcv2-structure.md) structure
  - Update routing paths in all Sprint 7 tasks
  - Add git checkout commands to developer tasks
  - Document that "v2.5" in path means git branch/tag v2.5
- After completing this PDCA entry, execute: Update Sprint 7 tasks with correct structure

## Metadata
- Agent: ScrumMaster
- Branch: cursor/recover-readme-for-pdca-entry-check-9aa0
- Commit: (pending)
- Date: 2025-08-13 UTC 17:25